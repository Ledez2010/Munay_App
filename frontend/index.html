<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Munay - Plataforma de Prevenci√≥n del Bullying</title>
    <!-- Favicon - Logo Munay (Brote Verde) -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="alternate icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <!-- Manifest solo se carga en servidores HTTP/HTTPS, no en file:// -->
    <script>
        if (window.location.protocol === 'http:' || window.location.protocol === 'https:') {
            const link = document.createElement('link');
            link.rel = 'manifest';
            link.href = 'site.webmanifest';
            document.head.appendChild(link);
        }
    </script>
    <meta name="theme-color" content="#4CAF50">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(220, 53, 69, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
            }
        }
    </style>
</head>
<body>
    <!-- Landing Page View -->
    <div id="landingView" class="landing-page">
        <nav class="landing-nav">
            <div class="nav-brand">
                <h1>Munay</h1>
            </div>
            <div class="nav-links">
                <a href="#problema" class="nav-link">El Problema</a>
                <a href="#solucion" class="nav-link">Soluci√≥n</a>
                <a href="#impacto" class="nav-link">Impacto</a>
                <a href="#beneficios" class="nav-link">Beneficios</a>
                <a href="#como-funciona" class="nav-link">C√≥mo Funciona</a>
                <a href="#sobre-nosotros" class="nav-link">Sobre Nosotros</a>
            </div>
            <div class="nav-actions">
                <button class="nav-btn nav-btn-secondary" onclick="showLoginView()">Iniciar sesi√≥n</button>
                <button class="nav-btn nav-btn-primary" onclick="showRequestDemoView()">Solicita una demo</button>
            </div>
        </nav>

        <section class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">Bienestar emocional visible, medible y accionable.</h1>
                <h2 class="hero-subtitle">La plataforma integral que eval√∫a, analiza y potencia el desarrollo socioemocional de tus estudiantes.</h2>
                <p class="hero-tagline">Decisiones claras. Intervenciones oportunas. Crecimiento real.</p>
                <div class="hero-buttons">
                    <button class="btn-hero btn-hero-primary" onclick="showRequestDemoView()"><span>Solicitar Demo</span></button>
                </div>
                <p class="hero-trust">Implementaci√≥n sencilla. Privacidad garantizada.</p>
            </div>
        </section>

        <section id="problema" class="problem-section">
            <div class="problem-content">
                <div class="problem-header">
                    <h3>Las escuelas necesitan comprender el bienestar emocional, pero no tienen herramientas claras.</h3>
                </div>
                <div class="problem-body">
                    <div class="problem-text">
                        <p>La mayor√≠a de centros educativos carecen de datos confiables sobre la salud emocional de sus estudiantes.</p>
                        <p>Las se√±ales llegan tarde, las intervenciones no siempre son precisas y el seguimiento se vuelve imposible sin informaci√≥n real.</p>
                    </div>
                    <div class="problem-solution-box">
                        <p class="problem-solution">Nuestra plataforma soluciona esta brecha con claridad, datos y acompa√±amiento en tiempo real.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="solucion" class="features-section">
            <h3>Una plataforma integral para el bienestar socioemocional escolar.</h3>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h4>Evaluaci√≥n Socioemocional</h4>
                    <p>Tests cient√≠ficos que miden seis competencias clave: empat√≠a, autocuidado, regulaci√≥n emocional, compasi√≥n, autoconciencia y resoluci√≥n de conflictos.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h4>Actividades L√∫dicas y Gamificaci√≥n</h4>
                    <p>Ejercicios interactivos, simuladores y recompensas que desarrollan habilidades emocionales de forma divertida.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h4>Notificaciones Inteligentes</h4>
                    <p>Recibe alertas al instante cuando un estudiante completa actividades o presenta cambios relevantes.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h4>Espacios de Crecimiento</h4>
                    <p>Crea grupos para seguimiento espec√≠fico y visualiza m√©tricas individuales y colectivas.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h4>An√°lisis Visual Avanzado</h4>
                    <p>Dashboards interactivos con tendencias, comparaciones y distribuci√≥n emocional por edad y g√©nero.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h4>Historial Emocional</h4>
                    <p>Registros unificados de todas las actividades y evaluaciones, con contexto y evoluci√≥n temporal.</p>
                </div>
            </div>
            <div class="section-button">
                <button class="btn-hero btn-hero-secondary" onclick="showRequestDemoView()"><span>Ver Plataforma en Acci√≥n</span></button>
            </div>
        </section>

        <section id="impacto" class="benefits-section">
            <div class="benefits-content">
                <h3>Impacto que transforma vidas dentro y fuera del aula.</h3>
                <div class="benefits-list">
                    <div class="benefit-item">
                        <div class="benefit-icon benefit-icon-visibility"></div>
                        <h4>Visibilidad Emocional</h4>
                        <p>Comprende el desarrollo de tus estudiantes con m√©tricas claras y visuales intuitivas.</p>
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon benefit-icon-alert"></div>
                        <h4>Intervenci√≥n Oportuna</h4>
                        <p>Alertas en tiempo real y seguimiento planificado para apoyar antes de que algo escale.</p>
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon benefit-icon-motivation"></div>
                        <h4>Motivaci√≥n Activa</h4>
                        <p>Badges e insignias que refuerzan el esfuerzo y hacen del aprendizaje emocional una experiencia atractiva.</p>
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon benefit-icon-humanity"></div>
                        <h4>Datos con Humanidad</h4>
                        <p>Cada n√∫mero refleja una historia, una emoci√≥n, un proceso. Interpretaci√≥n profunda que gu√≠a decisiones mejores.</p>
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon benefit-icon-experience"></div>
                        <h4>Experiencia C√°lida y Fluida</h4>
                        <p>Interfaz intuitiva, onboarding suave y navegaci√≥n dise√±ada para docentes y estudiantes.</p>
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon benefit-icon-privacy"></div>
                        <h4>Privacidad Garantizada</h4>
                        <p>Nada de respuestas individuales. Solo an√°lisis agregados y gestionados con √©tica total.</p>
                    </div>
                </div>
                <div class="section-button">
                    <button class="btn-hero btn-hero-secondary" onclick="scrollToSection('beneficios')"><span>Descubrir el Impacto</span></button>
                </div>
            </div>
        </section>

        <section id="beneficios" class="roles-section">
            <div class="roles-content">
                <h3>Un aliado para toda la comunidad educativa.</h3>
                <div class="roles-grid">
                    <div class="role-card">
                        <div class="role-icon role-icon-teacher"></div>
                        <h4>Para Docentes</h4>
                        <ul class="role-benefits">
                            <li>Informaci√≥n clara sin interpretaciones subjetivas.</li>
                            <li>Gesti√≥n emocional del aula simplificada.</li>
                            <li>Actividades listas para aplicar.</li>
                        </ul>
                    </div>
                    <div class="role-card">
                        <div class="role-icon role-icon-counselor"></div>
                        <h4>Para Orientadores</h4>
                        <ul class="role-benefits">
                            <li>Datos confiables para intervenciones personalizadas.</li>
                            <li>Seguimiento longitudinal.</li>
                            <li>Tendencias por edad, g√©nero y curso.</li>
                        </ul>
                    </div>
                    <div class="role-card">
                        <div class="role-icon role-icon-student"></div>
                        <h4>Para Estudiantes</h4>
                        <ul class="role-benefits">
                            <li>Actividades divertidas que los impulsan a crecer.</li>
                            <li>Motivaci√≥n real con recompensas.</li>
                            <li>Sensaci√≥n de ser vistos y valorados.</li>
                        </ul>
                    </div>
                    <div class="role-card">
                        <div class="role-icon role-icon-institution"></div>
                        <h4>Para Instituciones</h4>
                        <ul class="role-benefits">
                            <li>Informes potentes para proyectos educativos.</li>
                            <li>Diagn√≥sticos completos del clima emocional.</li>
                            <li>Evidencias para auditor√≠as y programas internos.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="blog" class="articles-section">
            <div class="articles-content">
                <h3>Blog</h3>
                <p style="text-align: center; color: #666666; margin-bottom: 48px; max-width: 700px; margin-left: auto; margin-right: auto;">
                    Explora art√≠culos actualizados sobre bienestar emocional, prevenci√≥n del bullying y desarrollo socioemocional. Recursos pr√°cticos para educadores comprometidos con el crecimiento integral de sus estudiantes.
                </p>
                <div class="articles-grid">
                    <article class="article-card" onclick="openArticleModal('article-1')">
                        <div class="article-header">
                            <div class="article-category">Prevenci√≥n</div>
                            <h4>Se√±ales de alerta: C√≥mo identificar el bullying en las escuelas</h4>
                        </div>
                        <div class="article-body">
                            <p>Conoce los indicadores clave que pueden ayudarte a detectar situaciones de acoso escolar antes de que se intensifiquen. Aprende a observar cambios de comportamiento, aislamiento social y otras se√±ales importantes.</p>
                        </div>
                        <div class="article-footer">
                            <span class="article-date">15 Enero 2025</span>
                            <span class="article-read-time">5 min</span>
                        </div>
                    </article>

                    <article class="article-card" onclick="openArticleModal('article-2')">
                        <div class="article-header">
                            <div class="article-category">Investigaci√≥n</div>
                            <h4>El impacto psicol√≥gico del bullying en estudiantes de secundaria</h4>
                        </div>
                        <div class="article-body">
                            <p>Estudios recientes demuestran c√≥mo el acoso escolar afecta la autoestima, el rendimiento acad√©mico y la salud mental a largo plazo. Descubre estrategias de apoyo emocional basadas en evidencia cient√≠fica.</p>
                        </div>
                        <div class="article-footer">
                            <span class="article-date">10 Enero 2025</span>
                            <span class="article-read-time">7 min</span>
                        </div>
                    </article>

                    <article class="article-card" onclick="openArticleModal('article-3')">
                        <div class="article-header">
                            <div class="article-category">Intervenci√≥n</div>
                            <h4>Protocolos efectivos de intervenci√≥n en casos de bullying</h4>
                        </div>
                        <div class="article-body">
                            <p>Gu√≠a pr√°ctica para docentes sobre c√≥mo abordar situaciones de acoso escolar. Incluye pasos claros para la intervenci√≥n inmediata, comunicaci√≥n con familias y seguimiento del caso.</p>
                        </div>
                        <div class="article-footer">
                            <span class="article-date">5 Enero 2025</span>
                            <span class="article-read-time">6 min</span>
                        </div>
                    </article>

                    <article class="article-card" onclick="openArticleModal('article-4')">
                        <div class="article-header">
                            <div class="article-category">Ciberbullying</div>
                            <h4>Ciberbullying: Prevenci√≥n en la era digital</h4>
                        </div>
                        <div class="article-body">
                            <p>El acoso a trav√©s de redes sociales y plataformas digitales presenta nuevos desaf√≠os. Aprende c√≥mo detectar ciberbullying y c√≥mo educar a los estudiantes sobre el uso responsable de la tecnolog√≠a.</p>
                        </div>
                        <div class="article-footer">
                            <span class="article-date">28 Diciembre 2024</span>
                            <span class="article-read-time">8 min</span>
                        </div>
                    </article>

                    <article class="article-card" onclick="openArticleModal('article-5')">
                        <div class="article-header">
                            <div class="article-category">Empat√≠a</div>
                            <h4>Desarrollando empat√≠a: Herramientas para prevenir el bullying</h4>
                        </div>
                        <div class="article-body">
                            <p>La empat√≠a es una habilidad clave para prevenir el acoso escolar. Descubre actividades pr√°cticas y ejercicios que puedes implementar en el aula para fomentar la comprensi√≥n y el respeto entre estudiantes.</p>
                        </div>
                        <div class="article-footer">
                            <span class="article-date">20 Diciembre 2024</span>
                            <span class="article-read-time">6 min</span>
                        </div>
                    </article>

                    <article class="article-card" onclick="openArticleModal('article-6')">
                        <div class="article-header">
                            <div class="article-category">Bienestar</div>
                            <h4>Creando un clima escolar positivo: El rol de los docentes</h4>
                        </div>
                        <div class="article-body">
                            <p>Los educadores tienen un papel fundamental en la creaci√≥n de ambientes escolares seguros. Explora estrategias para promover la inclusi√≥n, el respeto mutuo y la comunicaci√≥n efectiva en el aula.</p>
                        </div>
                        <div class="article-footer">
                            <span class="article-date">12 Diciembre 2024</span>
                            <span class="article-read-time">7 min</span>
                        </div>
                    </article>
                </div>
            </div>
        </section>

        <section id="como-funciona" class="how-it-works-section">
            <div class="how-it-works-content">
                <h3>As√≠ funciona la plataforma.</h3>
                <div class="steps-container">
                    <div class="step-item">
                        <div class="step-number">1</div>
                        <h4>Eval√∫a</h4>
                        <p>Los estudiantes completan tests psicom√©tricos.</p>
                    </div>
                    <div class="step-item">
                        <div class="step-number">2</div>
                        <h4>Comprende</h4>
                        <p>Dashboards intuitivos revelan tendencias y m√©tricas clave.</p>
                    </div>
                    <div class="step-item">
                        <div class="step-number">3</div>
                        <h4>Acompa√±a</h4>
                        <p>Se crean grupos personalizados y se act√∫a con precisi√≥n.</p>
                    </div>
                    <div class="step-item">
                        <div class="step-number">4</div>
                        <h4>Motiva</h4>
                        <p>Actividades l√∫dicas y badges impulsan el compromiso estudiantil.</p>
                    </div>
                    <div class="step-item">
                        <div class="step-number">5</div>
                        <h4>Transforma</h4>
                        <p>Intervenciones m√°s acertadas, comunidades m√°s fuertes.</p>
                    </div>
                </div>
                <div class="section-button">
                    <button class="btn-hero btn-hero-secondary" onclick="showRequestDemoView()"><span>Ver Flujo Completo</span></button>
                </div>
            </div>
        </section>

        <section id="sobre-nosotros" class="about-section">
            <div class="about-content">
                <div class="about-header">
                    <h3>Creemos en escuelas que cuidan desde el coraz√≥n.</h3>
                </div>
                <div class="about-body">
                    <div class="about-text">
                        <p class="about-intro">Somos un equipo multidisciplinar comprometido con un objetivo: que el bienestar emocional sea visible, medible y acompa√±able.</p>
                        <p class="about-team">Unimos psicolog√≠a, tecnolog√≠a y dise√±o para crear herramientas que no solo eval√∫an, sino que transforman la experiencia educativa.</p>
                    </div>
                    <div class="about-cta">
                        <button class="btn-hero btn-hero-tertiary" onclick="scrollToSection('cta-final')"><span>Conoce Nuestra Visi√≥n</span></button>
                    </div>
                </div>
            </div>
        </section>

        <section id="cta-final" class="cta-section">
            <h3>Tu comunidad merece claridad emocional y apoyo real.</h3>
            <p class="cta-subtitle">Empieza hoy a transformar el bienestar de tu instituci√≥n.</p>
            <div class="cta-buttons">
                <button class="btn-hero btn-hero-primary" onclick="showRequestDemoView()"><span>Solicitar Demo</span></button>
                <button class="btn-hero btn-hero-secondary" onclick="showRequestDemoView()"><span>Hablar con un Especialista</span></button>
            </div>
            <p class="cta-trust">Implementaci√≥n r√°pida. Acompa√±amiento continuo. Sin complicaciones.</p>
        </section>
    </div>

    <!-- Article Modal -->
    <div id="articleModal" class="article-modal">
        <div class="article-modal-content">
            <div class="article-modal-header">
                <button class="article-modal-close" onclick="closeArticleModal()">&times;</button>
                <div id="articleModalCategory" class="article-category"></div>
                <div class="article-modal-meta">
                    <span class="article-date" id="articleModalDate"></span>
                    <span class="article-read-time" id="articleModalReadTime"></span>
                </div>
            </div>
            <div class="article-modal-body" id="articleModalBody">
                <!-- Content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Login/Register View -->
    <div id="loginView" class="container hidden">
        <div class="login-card">
            <h1>Munay</h1>
            <p class="subtitle">Plataforma de Prevenci√≥n del Bullying</p>
            
            <!-- Login Form -->
            <form id="loginForm" class="form active">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Contrase√±a</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <div class="form-group" id="loginRoleGroup">
                    <label for="loginRole">Tipo de usuario</label>
                    <select id="loginRole" required>
                        <option value="">Seleccione...</option>
                        <option value="student">Estudiante</option>
                        <option value="teacher">Docente</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">Iniciar Sesi√≥n</button>
            </form>

            <div id="message" class="message"></div>
        </div>
    </div>

    <!-- Onboarding Modal -->
    <div id="onboardingModal" class="onboarding-modal hidden">
        <div class="onboarding-overlay"></div>
        <div class="onboarding-container">
            <div class="onboarding-content">
                <div class="onboarding-progress">
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" id="onboardingProgress"></div>
                    </div>
                    <span class="progress-text" id="onboardingStepText">Paso 1 de 4</span>
                </div>
                
                <div class="onboarding-slide active" id="onboardingSlide1">
                    <div class="onboarding-icon">üëã</div>
                    <h2 class="onboarding-title">¬°Bienvenido a Munay!</h2>
                    <p class="onboarding-description">
                        Estamos emocionados de tenerte aqu√≠. Te guiaremos en un recorrido r√°pido para que aproveches al m√°ximo la plataforma.
                    </p>
                </div>
                
                <div class="onboarding-slide" id="onboardingSlide2">
                    <div class="onboarding-icon" id="onboardingIcon2">üìä</div>
                    <h2 class="onboarding-title" id="onboardingTitle2">Tu Bienestar es Importante</h2>
                    <p class="onboarding-description" id="onboardingDesc2">
                        Completa las encuestas de bienestar para que podamos conocerte mejor y ofrecerte el apoyo que necesitas.
                    </p>
                </div>
                
                <div class="onboarding-slide" id="onboardingSlide3">
                    <div class="onboarding-icon" id="onboardingIcon3">üéÆ</div>
                    <h2 class="onboarding-title" id="onboardingTitle3">Actividades L√∫dicas</h2>
                    <p class="onboarding-description" id="onboardingDesc3">
                        Participa en actividades interactivas que te ayudar√°n a desarrollar habilidades emocionales y sociales de manera divertida.
                    </p>
                </div>
                
                <div class="onboarding-slide" id="onboardingSlide4">
                    <div class="onboarding-icon" id="onboardingIcon4">üí¨</div>
                    <h2 class="onboarding-title" id="onboardingTitle4">Comunicaci√≥n An√≥nima</h2>
                    <p class="onboarding-description" id="onboardingDesc4">
                        Si necesitas ayuda o quieres compartir algo, puedes enviar mensajes an√≥nimos a tu docente. Tu privacidad est√° protegida.
                    </p>
                </div>
                
                <div class="onboarding-actions">
                    <button class="btn-onboarding-secondary" onclick="previousOnboardingStep()" id="onboardingPrevBtn" style="display: none;">
                        ‚Üê Anterior
                    </button>
                    <button class="btn-onboarding-primary" onclick="nextOnboardingStep()" id="onboardingNextBtn">
                        Siguiente ‚Üí
                    </button>
                    <button class="btn-onboarding-primary" onclick="completeOnboarding()" id="onboardingCompleteBtn" style="display: none;">
                        ¬°Comenzar!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Teacher Onboarding Modal -->
    <div id="teacherOnboardingModal" class="onboarding-modal hidden">
        <div class="onboarding-overlay"></div>
        <div class="onboarding-container">
            <div class="onboarding-content teacher-onboarding-content">
                <div class="onboarding-progress">
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" id="teacherOnboardingProgress"></div>
                    </div>
                    <span class="progress-text" id="teacherOnboardingStepText">Paso 1 de 7</span>
                </div>
                
                <!-- Slide 1: Bienvenida -->
                <div class="onboarding-slide active" id="teacherOnboardingSlide1">
                    <div class="onboarding-icon">üëã</div>
                    <h2 class="onboarding-title">¬°Bienvenido a Munay!</h2>
                    <p class="onboarding-description" style="margin-bottom: 30px;">
                        Estamos emocionados de tenerte como parte de nuestra comunidad educativa. Este es un recorrido r√°pido e interactivo para que conozcas todas las herramientas disponibles para apoyar el bienestar emocional de tus estudiantes.
                    </p>
                    <div class="onboarding-feature-preview">
                        <div class="feature-preview-item">
                            <span class="feature-icon">üìä</span>
                            <span>Dashboard</span>
                        </div>
                        <div class="feature-preview-item">
                            <span class="feature-icon">üí¨</span>
                            <span>Mensajes</span>
                        </div>
                        <div class="feature-preview-item">
                            <span class="feature-icon">üë•</span>
                            <span>Estudiantes</span>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 2: Dashboard -->
                <div class="onboarding-slide" id="teacherOnboardingSlide2">
                    <div class="onboarding-icon">üìä</div>
                    <h2 class="onboarding-title">Dashboard Inteligente</h2>
                    <p class="onboarding-description">
                        Tu centro de control donde podr√°s visualizar m√©tricas clave del bienestar de tus estudiantes, tendencias de riesgo, y an√°lisis detallados de su progreso emocional.
                    </p>
                    <div class="onboarding-feature-list">
                        <div class="feature-item">
                            <span class="feature-bullet">‚úì</span>
                            <span>Visualizaci√≥n de m√©tricas de bienestar en tiempo real</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">‚úì</span>
                            <span>Gr√°ficos de tendencias y an√°lisis de keywords</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">‚úì</span>
                            <span>Alertas autom√°ticas de estudiantes en riesgo</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">‚úì</span>
                            <span>Valores emocionales cuantificados (empat√≠a, autocuidado, resoluci√≥n de conflictos)</span>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 3: Mensajes An√≥nimos -->
                <div class="onboarding-slide" id="teacherOnboardingSlide3">
                    <div class="onboarding-icon">üí¨</div>
                    <h2 class="onboarding-title">Canal de Comunicaci√≥n An√≥nima</h2>
                    <p class="onboarding-description">
                        Un espacio seguro donde tus estudiantes pueden comunicarse contigo de forma completamente an√≥nima. Esto fomenta la confianza y permite identificar situaciones que requieren atenci√≥n.
                    </p>
                    <div class="onboarding-feature-list">
                        <div class="feature-item">
                            <span class="feature-bullet">üîí</span>
                            <span>Privacidad total garantizada para los estudiantes</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üì®</span>
                            <span>Recibe y responde mensajes an√≥nimos</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üîç</span>
                            <span>An√°lisis autom√°tico de keywords para detectar riesgos</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üìä</span>
                            <span>Visualizaci√≥n de tendencias de comunicaci√≥n</span>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 4: Lista de Estudiantes -->
                <div class="onboarding-slide" id="teacherOnboardingSlide4">
                    <div class="onboarding-icon">üë•</div>
                    <h2 class="onboarding-title">Gesti√≥n de Estudiantes</h2>
                    <p class="onboarding-description">
                        Accede a informaci√≥n detallada de cada estudiante: su progreso, historial de actividades, encuestas completadas, y m√©tricas individuales de bienestar.
                    </p>
                    <div class="onboarding-feature-list">
                        <div class="feature-item">
                            <span class="feature-bullet">üë§</span>
                            <span>Perfiles individuales con informaci√≥n completa</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üìà</span>
                            <span>Gr√°ficos de progreso mensual y tendencias</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üìã</span>
                            <span>Historial de encuestas y actividades completadas</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">‚ö†Ô∏è</span>
                            <span>Alertas de riesgo personalizadas por estudiante</span>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 5: C√≥digos de Clase -->
                <div class="onboarding-slide" id="teacherOnboardingSlide5">
                    <div class="onboarding-icon">üîë</div>
                    <h2 class="onboarding-title">C√≥digos de Clase</h2>
                    <p class="onboarding-description">
                        Crea y gestiona c√≥digos √∫nicos para tus clases. Comparte estos c√≥digos con tus estudiantes para que puedan unirse a tu grupo y acceder a las actividades personalizadas.
                    </p>
                    <div class="onboarding-feature-list">
                        <div class="feature-item">
                            <span class="feature-bullet">‚ûï</span>
                            <span>Crea m√∫ltiples c√≥digos de clase ilimitados</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üìã</span>
                            <span>Gestiona y organiza tus clases f√°cilmente</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üë•</span>
                            <span>Visualiza qu√© estudiantes pertenecen a cada clase</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üîê</span>
                            <span>C√≥digos √∫nicos y seguros para cada grupo</span>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 6: Notificaciones -->
                <div class="onboarding-slide" id="teacherOnboardingSlide6">
                    <div class="onboarding-icon">üîî</div>
                    <h2 class="onboarding-title">Sistema de Notificaciones</h2>
                    <p class="onboarding-description">
                        Mantente al d√≠a con las actividades de tus estudiantes. Recibe notificaciones cuando completen actividades, tests, o cuando necesiten tu atenci√≥n.
                    </p>
                    <div class="onboarding-feature-list">
                        <div class="feature-item">
                            <span class="feature-bullet">üéØ</span>
                            <span>Notificaciones en tiempo real de actividades completadas</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üìä</span>
                            <span>Visualizaci√≥n de scores y resultados de tests</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üìÖ</span>
                            <span>Agrupaci√≥n por fecha y estudiante</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">‚úÖ</span>
                            <span>Marca notificaciones como le√≠das</span>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 7: Valores Emocionales -->
                <div class="onboarding-slide" id="teacherOnboardingSlide7">
                    <div class="onboarding-icon">üíö</div>
                    <h2 class="onboarding-title">Valores Emocionales</h2>
                    <p class="onboarding-description">
                        Accede a m√©tricas cuantitativas de los valores emocionales de tus estudiantes: empat√≠a, autocuidado, resoluci√≥n de conflictos, compasi√≥n, autoconciencia y regulaci√≥n emocional.
                    </p>
                    <div class="onboarding-feature-list">
                        <div class="feature-item">
                            <span class="feature-bullet">üìä</span>
                            <span>An√°lisis basado en respuestas de tests y encuestas</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üìà</span>
                            <span>Gr√°ficos individuales por valor emocional</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üîç</span>
                            <span>Filtros por mes, edad y g√©nero</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-bullet">üí°</span>
                            <span>Informaci√≥n cuantitativa con valor humano</span>
                        </div>
                    </div>
                </div>
                
                <div class="onboarding-actions">
                    <button class="btn-onboarding-secondary" onclick="previousTeacherOnboardingStep()" id="teacherOnboardingPrevBtn" style="display: none;">
                        ‚Üê Anterior
                    </button>
                    <button class="btn-onboarding-primary" onclick="nextTeacherOnboardingStep()" id="teacherOnboardingNextBtn">
                        Siguiente ‚Üí
                    </button>
                    <button class="btn-onboarding-primary" onclick="completeOnboarding()" id="teacherOnboardingCompleteBtn" style="display: none;">
                        ¬°Comenzar a Usar Munay!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Request Demo View -->
    <div id="requestDemoView" class="container hidden">
        <div class="login-card" style="max-width: 600px;">
            <div style="text-align: center; margin-bottom: 30px;">
                <div style="font-size: 3em; margin-bottom: 15px;">üéì</div>
                <h1 style="color: #1a2332; margin-bottom: 10px;">Solicitar Demo</h1>
                <p class="subtitle" style="color: #5a6c7d;">Completa el formulario y nos pondremos en contacto contigo</p>
            </div>
            
            <form id="requestDemoForm" class="form active">
                <div class="form-group">
                    <label for="demoName">Nombre completo <span style="color: #e74c3c;">*</span></label>
                    <input type="text" id="demoName" required placeholder="Ingresa tu nombre completo">
                </div>
                
                <div class="form-group">
                    <label for="demoEmail">Email <span style="color: #e74c3c;">*</span></label>
                    <input type="email" id="demoEmail" required placeholder="tu@email.com">
                </div>
                
                <div class="form-group">
                    <label for="demoPhone">Tel√©fono <span style="color: #e74c3c;">*</span></label>
                    <input type="tel" id="demoPhone" required placeholder="+34 600 000 000">
                </div>
                
                <div class="form-group">
                    <label for="demoSchool">Centro educativo <span style="color: #e74c3c;">*</span></label>
                    <input type="text" id="demoSchool" required placeholder="Nombre de tu centro educativo">
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 30px;">
                    <button type="submit" class="btn-primary" style="flex: 1;">Enviar Solicitud</button>
                    <button type="button" class="btn-secondary" onclick="showLandingView()" style="flex: 1;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Student Dashboard View -->
    <div id="studentView" class="dashboard-container hidden">
        <header class="dashboard-header">
            <h1 onclick="showLandingView()" class="logo-clickable">Munay</h1>
            <div class="user-info">
                <button id="studentProfileButton" class="student-profile-btn" onclick="showStudentProfileView()" style="margin-right: 10px;">
                    <span id="studentAvatarHeader">üßë‚Äçüéì</span>
                    <span id="studentNameHeader"></span>
                </button>
                <button class="btn-secondary" onclick="logout()" id="logoutButton">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <nav class="teacher-nav">
            <button class="nav-btn active" onclick="showStudentView()">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" onclick="showStudentMessagesView()">
                <span class="nav-icon">üí¨</span>
                <span>Canal de Comunicaci√≥n</span>
            </button>
            <button class="nav-btn" onclick="openRewardsModal()">
                <span class="nav-icon">üèÜ</span>
                <span>Mis Recompensas</span>
            </button>
        </nav>

        <main class="dashboard-main">
            <div class="welcome-section">
                <h2><span id="welcomeGreeting">Bienvenido</span>, <span id="welcomeName"></span></h2>
                <p>Completa las encuestas y actividades para cuidar tu bienestar y el de tus compa√±eros.</p>
            </div>

            <!-- Estad√≠sticas r√°pidas -->
            <div class="dashboard-stats-grid" style="margin-top: 30px; margin-bottom: 30px;">
                <div class="dashboard-stat-card">
                    <div class="dashboard-stat-value" id="studentSurveyCount">0</div>
                    <div class="dashboard-stat-label">Encuestas Completadas</div>
                </div>
                <div class="dashboard-stat-card">
                    <div class="dashboard-stat-value" id="studentActivityCount">0</div>
                    <div class="dashboard-stat-label">Actividades Completadas</div>
                </div>
                <div class="dashboard-stat-card">
                    <div class="dashboard-stat-value" id="studentBadgeCount" style="color: #A3C9A8;">0</div>
                    <div class="dashboard-stat-label">Recompensas Obtenidas</div>
                </div>
            </div>

            <div class="content-section">
                <div class="section-title">
                    <h3>üìã Encuestas de Bienestar</h3>
                    <p style="font-size: 0.9em; color: #666; margin-top: 5px; font-weight: normal;">
                        Completa las encuestas para evaluar tu bienestar emocional y social
                    </p>
                </div>

                <div id="surveysContainer" class="surveys-container">
                    <!-- Las encuestas se cargar√°n din√°micamente -->
                </div>

                <div class="section-title" style="margin-top: 40px;">
                    <h3>üéØ Actividades L√∫dicas</h3>
                    <p style="font-size: 0.9em; color: #666; margin-top: 5px; font-weight: normal;">
                        Participa en actividades interactivas que fortalecen tus habilidades socioemocionales
                    </p>
                </div>

                <div id="activitiesContainer" class="activities-container">
                    <!-- Las actividades se cargar√°n din√°micamente -->
                </div>
            </div>
        </main>
    </div>

    <!-- Student Messages View -->
    <div id="studentMessagesView" class="dashboard-container hidden">
        <header class="dashboard-header">
            <h1 onclick="showLandingView()" class="logo-clickable">Munay</h1>
            <div class="user-info">
                <button id="studentProfileButton" class="student-profile-btn" onclick="showStudentProfileView()" style="margin-right: 10px;">
                    <span id="studentAvatarHeader">üßë‚Äçüéì</span>
                    <span id="studentNameHeader"></span>
                </button>
                <button class="btn-secondary" onclick="logout()" id="logoutButton">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <nav class="teacher-nav">
            <button class="nav-btn" onclick="showStudentView()">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn active" onclick="showStudentMessagesView()">
                <span class="nav-icon">üí¨</span>
                <span>Canal de Comunicaci√≥n</span>
            </button>
            <button class="nav-btn" onclick="openRewardsModal()">
                <span class="nav-icon">üèÜ</span>
                <span>Mis Recompensas</span>
            </button>
        </nav>

        <main class="dashboard-main">
            <div class="welcome-section">
                <h2>Comunicaci√≥n An√≥nima</h2>
                <p>Tu identidad permanecer√° completamente confidencial. El docente solo ver√° un n√∫mero de identificaci√≥n an√≥nima.</p>
            </div>

            <div class="content-section">
                <div style="text-align: center; margin-bottom: 30px;">
                    <button class="btn-primary" onclick="openSendMessageModal()" style="padding: 15px 40px; font-size: 1.2em;">
                        Enviar Nuevo Mensaje An√≥nimo
                    </button>
                </div>

                <div class="section-title">
                    <h3>Mis Mensajes</h3>
                </div>

                <div id="studentMessagesContainer" style="margin-top: 20px;">
                    <!-- Los mensajes y respuestas se cargar√°n aqu√≠ -->
                </div>
            </div>
        </main>
    </div>

    <!-- Student Profile View -->
    <div id="studentProfileView" class="dashboard-container hidden">
        <header class="dashboard-header">
            <h1 onclick="showLandingView()" class="logo-clickable">Munay</h1>
            <div class="user-info">
                <button id="studentProfileButton" class="student-profile-btn" onclick="showStudentProfileView()" style="margin-right: 10px;">
                    <span id="studentAvatarHeader">üßë‚Äçüéì</span>
                    <span id="studentNameHeader"></span>
                </button>
                <button class="btn-secondary" onclick="logout()" id="logoutButton">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <nav class="teacher-nav">
            <button class="nav-btn" onclick="showStudentView()">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" onclick="showStudentMessagesView()">
                <span class="nav-icon">üí¨</span>
                <span>Canal de Comunicaci√≥n</span>
            </button>
            <button class="nav-btn" onclick="openRewardsModal()">
                <span class="nav-icon">üèÜ</span>
                <span>Mis Recompensas</span>
            </button>
        </nav>

        <main class="dashboard-main">
            <div class="welcome-section">
                <h2>Mi Perfil</h2>
                <p>Gestiona tu informaci√≥n personal y personaliza tu avatar</p>
            </div>

            <div class="profile-container" style="max-width: 800px; margin: 30px auto; background: white; border-radius: 16px; padding: 40px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
                <!-- Avatar Section -->
                <div class="avatar-section" style="text-align: center; margin-bottom: 40px; padding-bottom: 40px; border-bottom: 2px solid #f0f0f0;">
                    <div id="currentAvatarDisplay" style="font-size: 120px; margin-bottom: 20px; cursor: pointer; transition: transform 0.3s;" onclick="openAvatarSelector()">
                        üßë‚Äçüéì
                    </div>
                    <button class="btn-primary" onclick="openAvatarSelector()" style="padding: 12px 30px; font-size: 1em; border-radius: 8px;">
                        Cambiar Avatar
                    </button>
                </div>

                <!-- Profile Information -->
                <div class="profile-info-section">
                    <div class="profile-info-item" style="display: flex; justify-content: space-between; align-items: center; padding: 20px; margin-bottom: 15px; background: #f8f9fa; border-radius: 12px;">
                        <div>
                            <label style="display: block; font-weight: 600; color: #A3C9A8; margin-bottom: 5px; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">Nombre Completo</label>
                            <span id="profileFullName" style="font-size: 1.2em; color: #1a2332; font-weight: 500;"></span>
                        </div>
                    </div>

                    <div class="profile-info-item" style="display: flex; justify-content: space-between; align-items: center; padding: 20px; margin-bottom: 15px; background: #f8f9fa; border-radius: 12px;">
                        <div>
                            <label style="display: block; font-weight: 600; color: #A3C9A8; margin-bottom: 5px; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">Edad</label>
                            <span id="profileAge" style="font-size: 1.2em; color: #1a2332; font-weight: 500;"></span>
                        </div>
                    </div>

                    <div class="profile-info-item" style="display: flex; justify-content: space-between; align-items: center; padding: 20px; margin-bottom: 15px; background: #f8f9fa; border-radius: 12px;">
                        <div>
                            <label style="display: block; font-weight: 600; color: #A3C9A8; margin-bottom: 5px; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">Curso</label>
                            <span id="profileCourse" style="font-size: 1.2em; color: #1a2332; font-weight: 500;"></span>
                        </div>
                    </div>

                    <div class="profile-info-item" style="display: flex; justify-content: space-between; align-items: center; padding: 20px; margin-bottom: 15px; background: #f8f9fa; border-radius: 12px;">
                        <div>
                            <label style="display: block; font-weight: 600; color: #A3C9A8; margin-bottom: 5px; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">Email</label>
                            <span id="profileEmail" style="font-size: 1.2em; color: #1a2332; font-weight: 500;"></span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Avatar Selector Modal -->
    <div id="avatarSelectorModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #f0f0f0;">
                <h2 style="margin: 0; color: #1a2332; font-size: 1.5em;">Selecciona tu Avatar</h2>
                <button onclick="closeAvatarSelector()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.3s;" onmouseover="this.style.background='#f0f0f0'" onmouseout="this.style.background='none'">√ó</button>
            </div>
            <div class="modal-body">
                <div id="avatarGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 20px; max-height: 400px; overflow-y: auto; padding: 10px;">
                    <!-- Los avatares se generar√°n din√°micamente -->
                </div>
            </div>
            <div class="modal-footer" style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #f0f0f0; display: flex; justify-content: flex-end; gap: 10px;">
                <button class="btn-secondary" onclick="closeAvatarSelector()" style="padding: 12px 30px; border-radius: 8px;">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Teacher Dashboard View -->
    <div id="teacherView" class="dashboard-container hidden">
        <header class="dashboard-header">
            <h1 onclick="showLandingView()" class="logo-clickable">Munay</h1>
            <div class="user-info" style="display: flex; align-items: center; gap: 12px;">
                <span id="teacherName"></span>
                <button class="btn-secondary" onclick="logout()" id="logoutButton">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <nav class="teacher-nav">
            <button class="nav-btn active" onclick="showTeacherView()">
                <span class="nav-icon">üìä</span>
                <span data-i18n="nav.dashboard">Dashboard</span>
            </button>
            <button class="nav-btn" onclick="showTeacherMessagesView()">
                <span class="nav-icon">üí¨</span>
                <span data-i18n="nav.messages">Mensajes An√≥nimos</span>
            </button>
            <button class="nav-btn" onclick="showTeacherRiskAlertsView()" style="position: relative;" id="riskAlertsNavBtn">
                <span class="nav-icon">‚ö†Ô∏è</span>
                <span data-i18n="nav.riskAlerts">Alertas de Riesgo</span>
                <span id="riskAlertsBadge" style="display: none; position: absolute; top: 8px; right: 8px; width: 8px; height: 8px; background: #dc3545; border-radius: 50%;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherStudentsView()">
                <span class="nav-icon">üë•</span>
                <span data-i18n="nav.students">Lista de Estudiantes</span>
            </button>
            <button class="nav-btn" onclick="showTeacherNotificationsView()" style="position: relative;">
                <span class="nav-icon">üîî</span>
                <span data-i18n="nav.notifications">Notificaciones</span>
                <span class="notification-badge-nav" id="notificationBadge" style="display: none;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherClassCodesView()">
                <span class="nav-icon">üîë</span>
                <span data-i18n="nav.classCodes">Mis C√≥digos de Clase</span>
            </button>
            <button class="nav-btn" onclick="showTeacherGrowthSpacesView()">
                <span class="nav-icon">üå±</span>
                <span data-i18n="nav.growthSpaces">Espacios de Crecimiento</span>
            </button>
        </nav>

        <main class="dashboard-main">
            <div class="welcome-section">
                <h2><span id="welcomeTeacherGreeting">Bienvenido</span>, <span id="welcomeTeacherName"></span></h2>
                <p>Visualiza el bienestar de tus estudiantes y detecta casos que requieren atenci√≥n.</p>
            </div>

            <!-- Sistema de Pesta√±as -->
            <div class="dashboard-tabs-container">
                <div class="dashboard-tabs">
                    <button class="dashboard-tab active" data-tab="summary" onclick="switchDashboardTab('summary')">
                        <span class="tab-icon">üìä</span>
                        <span>Resumen</span>
                    </button>
                    <button class="dashboard-tab" data-tab="analysis" onclick="switchDashboardTab('analysis')">
                        <span class="tab-icon">üìà</span>
                        <span>An√°lisis Visual</span>
                    </button>
                    <button class="dashboard-tab" data-tab="emotional" onclick="switchDashboardTab('emotional')">
                        <span class="tab-icon">üíö</span>
                        <span>Valores Emocionales</span>
                    </button>
                </div>
            </div>

            <div class="content-section">
                <!-- Pesta√±a 1: Resumen -->
                <div class="dashboard-tab-content active" id="tab-summary">
                    <div class="section-title">
                        <h3 data-i18n="stats.wellbeingStatus">Estado del Bienestar Estudiantil</h3>
                    </div>

                    <div class="stats-overview">
                        <div class="stat-card">
                            <div class="stat-number" id="totalStudents">0</div>
                            <div class="stat-label" data-i18n="stats.totalStudents">Total Estudiantes</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="completedSurveys">0</div>
                            <div class="stat-label" data-i18n="stats.surveysCompleted">Encuestas Completadas</div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-number" id="attentionNeeded">0</div>
                            <div class="stat-label" data-i18n="stats.attentionNeeded">Requieren Atenci√≥n</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-number" id="goodWellbeing">0</div>
                            <div class="stat-label" data-i18n="stats.optimalWellbeing">Bienestar √ìptimo</div>
                        </div>
                    </div>

                    <div class="section-title" style="margin-top: 40px;">
                        <h3 data-i18n="stats.actionResources">Recursos de Acci√≥n</h3>
                    </div>

                    <div id="actionResourcesSection" class="action-resources-section">
                        <div id="actionResourcesGrid" class="action-resources-grid">
                            <!-- Los recursos se cargar√°n din√°micamente aqu√≠ -->
                        </div>
                    </div>
                </div>

                <!-- Pesta√±a 2: An√°lisis Visual -->
                <div class="dashboard-tab-content" id="tab-analysis">
                    <div class="section-title">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                            <h3>An√°lisis Visual</h3>
                            <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <label for="analysisClassCodeFilter" style="font-size: 0.9em; color: #666; font-weight: 500;">C√≥digo de clase:</label>
                                    <select id="analysisClassCodeFilter" onchange="debouncedUpdateAnalysisChartsFilter()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9em; cursor: pointer;">
                                        <option value="">Todas las clases</option>
                                        <!-- Las opciones de c√≥digo de clase se generar√°n din√°micamente -->
                                    </select>
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <label for="analysisMonthFilter" style="font-size: 0.9em; color: #666; font-weight: 500;">Mes:</label>
                                    <select id="analysisMonthFilter" onchange="updateAnalysisChartsFilter()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9em; cursor: pointer;">
                                        <option value="">Todos los meses</option>
                                        <!-- Las opciones de mes se generar√°n din√°micamente -->
                                    </select>
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <label for="analysisAgeFilter" style="font-size: 0.9em; color: #666; font-weight: 500;">Edad:</label>
                                    <select id="analysisAgeFilter" onchange="debouncedUpdateAnalysisChartsFilter()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9em; cursor: pointer;">
                                        <option value="">Todas las edades</option>
                                        <option value="9-11">9-11 a√±os</option>
                                        <option value="12-15">12-15 a√±os</option>
                                        <option value="16-17">16-17 a√±os</option>
                                    </select>
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <label for="analysisGenderFilter" style="font-size: 0.9em; color: #666; font-weight: 500;">G√©nero:</label>
                                    <select id="analysisGenderFilter" onchange="debouncedUpdateAnalysisChartsFilter()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9em; cursor: pointer;">
                                        <option value="">Todos los g√©neros</option>
                                        <option value="masculino">Masculino</option>
                                        <option value="femenino">Femenino</option>
                                        <option value="otro">Otro</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="charts-container charts-container-column">
                        <div class="chart-card chart-card-full">
                            <!-- Medialuna decorativa -->
                            <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; background: linear-gradient(135deg, rgba(143, 196, 217, 0.15) 0%, rgba(143, 196, 217, 0.08) 100%); border-radius: 0 0 0 100px;"></div>
                            <div style="position: relative; z-index: 1;">
                                <h4 data-i18n="stats.wellbeingDistribution">Distribuci√≥n de Bienestar</h4>
                                <canvas id="wellbeingDistributionChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card chart-card-full">
                            <!-- Medialuna decorativa -->
                            <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; background: linear-gradient(135deg, rgba(163, 201, 168, 0.15) 0%, rgba(163, 201, 168, 0.08) 100%); border-radius: 0 0 0 100px;"></div>
                            <div style="position: relative; z-index: 1;">
                                <h4 data-i18n="stats.wellbeingTrend">Tendencia de Bienestar</h4>
                                <canvas id="wellbeingTrendChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="section-title" style="margin-top: 40px;">
                        <h3 data-i18n="stats.riskTrendsByKeywords">Tendencias de Riesgo por Keywords</h3>
                        <p style="font-size: 0.9em; color: #666; margin-top: 5px;">Evoluci√≥n de indicadores de riesgo y bienestar a lo largo del tiempo</p>
                    </div>

                    <div class="keywords-trends-card">
                        <canvas id="keywordsTrendsChart"></canvas>
                    </div>
                </div>

                <!-- Pesta√±a 3: Valores Emocionales -->
                <div class="dashboard-tab-content" id="tab-emotional">
                    <div class="section-title">
                        <h3 data-i18n="stats.emotionalValuesTitle">Valores Emocionales de los Estudiantes</h3>
                        <p style="font-size: 0.9em; color: #666; margin-top: 5px;" data-i18n="stats.emotionalValuesSubtitle">An√°lisis cuantitativo de las competencias socioemocionales basado en las respuestas de los tests</p>
                    </div>

                    <div id="emotionalValuesSection" class="emotional-values-section">
                        <div class="emotional-values-filters" style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <label for="emotionalValuesClassCodeFilter" style="font-size: 0.9em; color: #666; font-weight: 500;">C√≥digo de clase:</label>
                                <select id="emotionalValuesClassCodeFilter" onchange="updateEmotionalValuesCharts()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9em; cursor: pointer;">
                                    <option value="">Todas las clases</option>
                                    <!-- Las opciones de c√≥digo de clase se generar√°n din√°micamente -->
                                </select>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <label for="emotionalValuesMonthFilter" style="font-size: 0.9em; color: #666; font-weight: 500;" data-i18n="filters.month">Mes:</label>
                                <select id="emotionalValuesMonthFilter" onchange="updateEmotionalValuesCharts()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9em; cursor: pointer;">
                                    <option value="" data-i18n="filters.allMonths">Todos los meses</option>
                                    <!-- Las opciones de mes se generar√°n din√°micamente -->
                                </select>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <label for="emotionalValuesAgeFilter" style="font-size: 0.9em; color: #666; font-weight: 500;" data-i18n="filters.age">Edad:</label>
                                <select id="emotionalValuesAgeFilter" onchange="updateEmotionalValuesCharts()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9em; cursor: pointer;">
                                    <option value="" data-i18n="filters.allAges">Todas las edades</option>
                                    <option value="9-11">9-11 <span data-i18n="filters.years">a√±os</span></option>
                                    <option value="12-15">12-15 <span data-i18n="filters.years">a√±os</span></option>
                                    <option value="16-17">16-17 <span data-i18n="filters.years">a√±os</span></option>
                                </select>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <label for="emotionalValuesGenderFilter" style="font-size: 0.9em; color: #666; font-weight: 500;" data-i18n="filters.gender">G√©nero:</label>
                                <select id="emotionalValuesGenderFilter" onchange="updateEmotionalValuesCharts()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9em; cursor: pointer;">
                                    <option value="" data-i18n="filters.allGenders">Todos los g√©neros</option>
                                    <option value="masculino" data-i18n="filters.masculine">Masculino</option>
                                    <option value="femenino" data-i18n="filters.feminine">Femenino</option>
                                    <option value="otro" data-i18n="filters.other">Otro</option>
                                </select>
                            </div>
                        </div>

                    <div class="emotional-values-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 24px; margin-bottom: 30px;">
                        <div class="emotional-value-card" style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fc 100%); border-radius: 16px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border: 1px solid #e8eef5; transition: all 0.3s ease; position: relative; overflow: hidden;">
                            <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(40, 167, 69, 0.05) 100%); border-radius: 0 0 0 100px;"></div>
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; position: relative; z-index: 1;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 8px rgba(40, 167, 69, 0.2);">
                                        <span style="font-size: 1.8em;">üíö</span>
                                    </div>
                                    <div>
                                        <h4 style="margin: 0; color: #1a2332; font-size: 1.1em; font-weight: 600;">Empat√≠a</h4>
                                        <span id="empathyCount" style="font-size: 0.75em; color: #7BA680; font-weight: 500;">- evaluaciones</span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-bottom: 12px; position: relative; z-index: 1;">
                                <div id="empathyValue" style="font-size: 3em; font-weight: 700; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px; line-height: 1;">-</div>
                                <div id="empathyProgressBar" style="width: 100%; height: 8px; background: #e8eef5; border-radius: 10px; overflow: hidden; margin-top: 8px;">
                                    <div id="empathyProgressFill" style="height: 100%; background: linear-gradient(90deg, #28a745 0%, #20c997 100%); border-radius: 10px; width: 0%; transition: width 0.5s ease;"></div>
                                </div>
                            </div>
                            <p style="margin: 0 0 16px 0; font-size: 0.85em; color: #666; line-height: 1.5; position: relative; z-index: 1;">Capacidad de entender y compartir los sentimientos de otros</p>
                            <canvas id="empathyChart" style="margin-top: 12px; max-height: 140px; width: 100%; position: relative; z-index: 1;"></canvas>
                        </div>

                        <div class="emotional-value-card" style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fc 100%); border-radius: 16px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border: 1px solid #e8eef5; transition: all 0.3s ease; position: relative; overflow: hidden;">
                            <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; background: linear-gradient(135deg, rgba(163, 201, 168, 0.1) 0%, rgba(163, 201, 168, 0.05) 100%); border-radius: 0 0 0 100px;"></div>
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; position: relative; z-index: 1;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #A3C9A8 0%, #7BA680 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 8px rgba(163, 201, 168, 0.2);">
                                        <span style="font-size: 1.8em;">üßò</span>
                                    </div>
                                    <div>
                                        <h4 style="margin: 0; color: #1a2332; font-size: 1.1em; font-weight: 600;" data-i18n="emotionalValues.selfCare">Autocuidado</h4>
                                        <span id="selfCareCount" style="font-size: 0.75em; color: #7BA680; font-weight: 500;">- <span data-i18n="stats.evaluations">evaluaciones</span></span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-bottom: 12px; position: relative; z-index: 1;">
                                <div id="selfCareValue" style="font-size: 3em; font-weight: 700; background: linear-gradient(135deg, #A3C9A8 0%, #7BA680 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px; line-height: 1;">-</div>
                                <div id="selfCareProgressBar" style="width: 100%; height: 8px; background: #e8eef5; border-radius: 10px; overflow: hidden; margin-top: 8px;">
                                    <div id="selfCareProgressFill" style="height: 100%; background: linear-gradient(90deg, #A3C9A8 0%, #7BA680 100%); border-radius: 10px; width: 0%; transition: width 0.5s ease;"></div>
                                </div>
                            </div>
                            <p style="margin: 0 0 16px 0; font-size: 0.85em; color: #666; line-height: 1.5; position: relative; z-index: 1;" data-i18n="emotionalValues.selfCareDesc">Pr√°cticas para mantener el bienestar f√≠sico y mental</p>
                            <canvas id="selfCareChart" style="margin-top: 12px; max-height: 140px; width: 100%; position: relative; z-index: 1;"></canvas>
                        </div>

                        <div class="emotional-value-card" style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fc 100%); border-radius: 16px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border: 1px solid #e8eef5; transition: all 0.3s ease; position: relative; overflow: hidden;">
                            <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; background: linear-gradient(135deg, rgba(255, 193, 7, 0.1) 0%, rgba(255, 193, 7, 0.05) 100%); border-radius: 0 0 0 100px;"></div>
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; position: relative; z-index: 1;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 8px rgba(255, 193, 7, 0.2);">
                                        <span style="font-size: 1.8em;">ü§ù</span>
                                    </div>
                                    <div>
                                        <h4 style="margin: 0; color: #1a2332; font-size: 1.1em; font-weight: 600;" data-i18n="emotionalValues.conflictResolution">Resoluci√≥n de Conflictos</h4>
                                        <span id="conflictResolutionCount" style="font-size: 0.75em; color: #7BA680; font-weight: 500;">- <span data-i18n="stats.evaluations">evaluaciones</span></span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-bottom: 12px; position: relative; z-index: 1;">
                                <div id="conflictResolutionValue" style="font-size: 3em; font-weight: 700; background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px; line-height: 1;">-</div>
                                <div id="conflictResolutionProgressBar" style="width: 100%; height: 8px; background: #e8eef5; border-radius: 10px; overflow: hidden; margin-top: 8px;">
                                    <div id="conflictResolutionProgressFill" style="height: 100%; background: linear-gradient(90deg, #ffc107 0%, #ff9800 100%); border-radius: 10px; width: 0%; transition: width 0.5s ease;"></div>
                                </div>
                            </div>
                            <p style="margin: 0 0 16px 0; font-size: 0.85em; color: #666; line-height: 1.5; position: relative; z-index: 1;" data-i18n="emotionalValues.conflictResolutionDesc">Habilidad para resolver desacuerdos de manera pac√≠fica</p>
                            <canvas id="conflictResolutionChart" style="margin-top: 12px; max-height: 140px; width: 100%; position: relative; z-index: 1;"></canvas>
                        </div>

                        <div class="emotional-value-card" style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fc 100%); border-radius: 16px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border: 1px solid #e8eef5; transition: all 0.3s ease; position: relative; overflow: hidden;">
                            <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; background: linear-gradient(135deg, rgba(220, 53, 69, 0.1) 0%, rgba(220, 53, 69, 0.05) 100%); border-radius: 0 0 0 100px;"></div>
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; position: relative; z-index: 1;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 8px rgba(220, 53, 69, 0.2);">
                                        <span style="font-size: 1.8em;">‚ù§Ô∏è</span>
                                    </div>
                                    <div>
                                        <h4 style="margin: 0; color: #1a2332; font-size: 1.1em; font-weight: 600;" data-i18n="emotionalValues.compassion">Compasi√≥n</h4>
                                        <span id="compassionCount" style="font-size: 0.75em; color: #7BA680; font-weight: 500;">- <span data-i18n="stats.evaluations">evaluaciones</span></span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-bottom: 12px; position: relative; z-index: 1;">
                                <div id="compassionValue" style="font-size: 3em; font-weight: 700; background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px; line-height: 1;">-</div>
                                <div id="compassionProgressBar" style="width: 100%; height: 8px; background: #e8eef5; border-radius: 10px; overflow: hidden; margin-top: 8px;">
                                    <div id="compassionProgressFill" style="height: 100%; background: linear-gradient(90deg, #dc3545 0%, #c82333 100%); border-radius: 10px; width: 0%; transition: width 0.5s ease;"></div>
                                </div>
                            </div>
                            <p style="margin: 0 0 16px 0; font-size: 0.85em; color: #666; line-height: 1.5; position: relative; z-index: 1;" data-i18n="emotionalValues.compassionDesc">Capacidad de reconocer el sufrimiento y actuar con bondad</p>
                            <canvas id="compassionChart" style="margin-top: 12px; max-height: 140px; width: 100%; position: relative; z-index: 1;"></canvas>
                        </div>

                        <div class="emotional-value-card" style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fc 100%); border-radius: 16px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border: 1px solid #e8eef5; transition: all 0.3s ease; position: relative; overflow: hidden;">
                            <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; background: linear-gradient(135deg, rgba(23, 162, 184, 0.1) 0%, rgba(23, 162, 184, 0.05) 100%); border-radius: 0 0 0 100px;"></div>
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; position: relative; z-index: 1;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #17a2b8 0%, #138496 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 8px rgba(23, 162, 184, 0.2);">
                                        <span style="font-size: 1.8em;">üß†</span>
                                    </div>
                                    <div>
                                        <h4 style="margin: 0; color: #1a2332; font-size: 1.1em; font-weight: 600;" data-i18n="emotionalValues.selfAwareness">Autoconocimiento</h4>
                                        <span id="selfAwarenessCount" style="font-size: 0.75em; color: #7BA680; font-weight: 500;">- <span data-i18n="stats.evaluations">evaluaciones</span></span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-bottom: 12px; position: relative; z-index: 1;">
                                <div id="selfAwarenessValue" style="font-size: 3em; font-weight: 700; background: linear-gradient(135deg, #17a2b8 0%, #138496 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px; line-height: 1;">-</div>
                                <div id="selfAwarenessProgressBar" style="width: 100%; height: 8px; background: #e8eef5; border-radius: 10px; overflow: hidden; margin-top: 8px;">
                                    <div id="selfAwarenessProgressFill" style="height: 100%; background: linear-gradient(90deg, #17a2b8 0%, #138496 100%); border-radius: 10px; width: 0%; transition: width 0.5s ease;"></div>
                                </div>
                            </div>
                            <p style="margin: 0 0 16px 0; font-size: 0.85em; color: #666; line-height: 1.5; position: relative; z-index: 1;" data-i18n="emotionalValues.selfAwarenessDesc">Reconocimiento de las propias emociones y comportamientos</p>
                            <canvas id="selfAwarenessChart" style="margin-top: 12px; max-height: 140px; width: 100%; position: relative; z-index: 1;"></canvas>
                        </div>

                        <div class="emotional-value-card" style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fc 100%); border-radius: 16px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border: 1px solid #e8eef5; transition: all 0.3s ease; position: relative; overflow: hidden;">
                            <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; background: linear-gradient(135deg, rgba(111, 66, 193, 0.1) 0%, rgba(111, 66, 193, 0.05) 100%); border-radius: 0 0 0 100px;"></div>
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; position: relative; z-index: 1;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #6f42c1 0%, #5a32a3 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 8px rgba(111, 66, 193, 0.2);">
                                        <span style="font-size: 1.8em;">‚öñÔ∏è</span>
                                    </div>
                                    <div>
                                        <h4 style="margin: 0; color: #1a2332; font-size: 1.1em; font-weight: 600;" data-i18n="emotionalValues.emotionalRegulation">Regulaci√≥n Emocional</h4>
                                        <span id="emotionalRegulationCount" style="font-size: 0.75em; color: #7BA680; font-weight: 500;">- <span data-i18n="stats.evaluations">evaluaciones</span></span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-bottom: 12px; position: relative; z-index: 1;">
                                <div id="emotionalRegulationValue" style="font-size: 3em; font-weight: 700; background: linear-gradient(135deg, #6f42c1 0%, #5a32a3 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px; line-height: 1;">-</div>
                                <div id="emotionalRegulationProgressBar" style="width: 100%; height: 8px; background: #e8eef5; border-radius: 10px; overflow: hidden; margin-top: 8px;">
                                    <div id="emotionalRegulationProgressFill" style="height: 100%; background: linear-gradient(90deg, #6f42c1 0%, #5a32a3 100%); border-radius: 10px; width: 0%; transition: width 0.5s ease;"></div>
                                </div>
                            </div>
                            <p style="margin: 0 0 16px 0; font-size: 0.85em; color: #666; line-height: 1.5; position: relative; z-index: 1;" data-i18n="emotionalValues.emotionalRegulationDesc">Habilidad para gestionar y controlar las emociones</p>
                            <canvas id="emotionalRegulationChart" style="margin-top: 12px; max-height: 140px; width: 100%; position: relative; z-index: 1;"></canvas>
                        </div>
                    </div>
                </div>

                <div class="section-title" style="margin-top: 40px; display: none;">
                    <h3>Alertas de Riesgo por Keywords</h3>
                    <p style="font-size: 0.9em; color: #666; margin-top: 5px;">Mensajes que requieren atenci√≥n inmediata o seguimiento prioritario</p>
                </div>

                <div id="criticalAlertsContainer" style="display: none;">
                    <!-- Las alertas se cargar√°n aqu√≠ din√°micamente -->
                </div>
            </div>
        </main>
    </div>

    <!-- Teacher Risk Alerts View -->
    <div id="teacherRiskAlertsView" class="dashboard-container hidden">
        <header class="dashboard-header">
            <h1 onclick="showLandingView()" class="logo-clickable">Munay</h1>
            <div class="user-info" style="display: flex; align-items: center; gap: 12px;">
                <span id="teacherName"></span>
                <button class="btn-secondary" onclick="logout()" id="logoutButton">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <nav class="teacher-nav">
            <button class="nav-btn" onclick="showTeacherView()">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" onclick="showTeacherMessagesView()">
                <span class="nav-icon">üí¨</span>
                <span>Mensajes An√≥nimos</span>
            </button>
            <button class="nav-btn active" onclick="showTeacherRiskAlertsView()" style="position: relative;" id="riskAlertsNavBtn">
                <span class="nav-icon">‚ö†Ô∏è</span>
                <span>Alertas de Riesgo</span>
                <span id="riskAlertsBadge" style="display: none; position: absolute; top: 8px; right: 8px; width: 8px; height: 8px; background: #dc3545; border-radius: 50%;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherStudentsView()">
                <span class="nav-icon">üë•</span>
                <span>Lista de Estudiantes</span>
            </button>
            <button class="nav-btn" onclick="showTeacherNotificationsView()" style="position: relative;">
                <span class="nav-icon">üîî</span>
                <span>Notificaciones</span>
                <span class="notification-badge-nav" id="notificationBadge" style="display: none;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherClassCodesView()">
                <span class="nav-icon">üîë</span>
                <span>Mis C√≥digos de Clase</span>
            </button>
            <button class="nav-btn" onclick="showTeacherGrowthSpacesView()">
                <span class="nav-icon">üå±</span>
                <span>Espacios de Crecimiento</span>
            </button>
        </nav>

        <main class="dashboard-main">
            <div class="welcome-section">
                <h2 id="riskAlertsTitle">Alertas de Riesgo</h2>
                <p id="riskAlertsSubtitle" style="color: #666; margin-top: 10px;">Mensajes que requieren atenci√≥n inmediata o seguimiento prioritario</p>
            </div>

            <!-- Filtros avanzados -->
            <div id="riskAlertsFilters" style="background: white; padding: 20px; border-radius: 12px; margin-bottom: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" role="region" aria-label="Filtros de alertas de riesgo">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 16px;">
                    <div>
                        <label id="filterRiskLevelLabel" for="filterRiskLevel" style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.9em; color: #333;">Nivel de Riesgo</label>
                        <select id="filterRiskLevel" aria-label="Filtrar por nivel de riesgo" style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; background: white;">
                            <option value="all">Todos</option>
                            <option value="CRITICO">Cr√≠tico</option>
                            <option value="ALTO">Alto</option>
                            <option value="MEDIO">Medio</option>
                        </select>
                    </div>
                    <div>
                        <label id="filterCaseStatusLabel" for="filterCaseStatus" style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.9em; color: #333;">Estado del Caso</label>
                        <select id="filterCaseStatus" aria-label="Filtrar por estado del caso" style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; background: white;">
                            <option value="all">Todos los estados</option>
                            <option value="pending">Pendiente</option>
                            <option value="inProgress">En Proceso</option>
                            <option value="resolved">Resuelto</option>
                        </select>
                    </div>
                    <div>
                        <label id="filterDateFromLabel" for="filterDateFrom" style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.9em; color: #333;">Desde</label>
                        <input type="date" id="filterDateFrom" aria-label="Fecha desde" style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; background: white;">
                    </div>
                    <div>
                        <label id="filterDateToLabel" for="filterDateTo" style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.9em; color: #333;">Hasta</label>
                        <input type="date" id="filterDateTo" aria-label="Fecha hasta" style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; background: white;">
                    </div>
                </div>
                <div style="display: flex; gap: 12px; justify-content: flex-end;">
                    <button onclick="applyRiskAlertsFilters()" class="btn-primary" id="applyFiltersBtn" aria-label="Aplicar filtros" style="padding: 10px 20px;">Aplicar Filtros</button>
                    <button onclick="clearRiskAlertsFilters()" class="btn-secondary" id="clearFiltersBtn" aria-label="Limpiar filtros" style="padding: 10px 20px;">Limpiar</button>
                </div>
            </div>

            <div id="riskAlertsContainer" style="margin-top: 30px;">
                <!-- Las alertas se cargar√°n aqu√≠ din√°micamente -->
            </div>
        </main>
    </div>

    <!-- Teacher Messages View -->
    <div id="teacherMessagesView" class="dashboard-container hidden">
        <header class="dashboard-header">
            <h1 onclick="showLandingView()" class="logo-clickable">Munay</h1>
            <div class="user-info" style="display: flex; align-items: center; gap: 12px;">
                <span id="teacherName"></span>
                <button class="btn-secondary" onclick="logout()" id="logoutButton">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <nav class="teacher-nav">
            <button class="nav-btn" onclick="showTeacherView()">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn active" onclick="showTeacherMessagesView()">
                <span class="nav-icon">üí¨</span>
                <span>Mensajes An√≥nimos</span>
            </button>
            <button class="nav-btn" onclick="showTeacherRiskAlertsView()" style="position: relative;" id="riskAlertsNavBtn">
                <span class="nav-icon">‚ö†Ô∏è</span>
                <span>Alertas de Riesgo</span>
                <span id="riskAlertsBadge" style="display: none; position: absolute; top: 8px; right: 8px; width: 8px; height: 8px; background: #dc3545; border-radius: 50%;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherStudentsView()">
                <span class="nav-icon">üë•</span>
                <span>Lista de Estudiantes</span>
            </button>
            <button class="nav-btn" onclick="showTeacherNotificationsView()" style="position: relative;">
                <span class="nav-icon">üîî</span>
                <span>Notificaciones</span>
                <span class="notification-badge-nav" id="notificationBadge" style="display: none;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherClassCodesView()">
                <span class="nav-icon">üîë</span>
                <span>Mis C√≥digos de Clase</span>
            </button>
            <button class="nav-btn" onclick="showTeacherGrowthSpacesView()">
                <span class="nav-icon">üå±</span>
                <span>Espacios de Crecimiento</span>
            </button>
        </nav>

        <main class="dashboard-main">
            <div class="welcome-section">
                <h2 data-i18n="messages.title">Comunicaci√≥n con Estudiantes</h2>
                <p data-i18n="messages.subtitle">Los estudiantes pueden enviarte mensajes de forma completamente an√≥nima. Solo ver√°s un n√∫mero de identificaci√≥n. Revisa y responde cuando sea necesario.</p>
            </div>

            <div class="content-section">
                <div class="section-title">
                    <h3 data-i18n="messages.received">Mensajes Recibidos</h3>
                </div>

                <!-- Botones de filtro -->
                <div style="display: flex; gap: 15px; margin-bottom: 25px; padding: 20px; background: linear-gradient(135deg, #f8f9fc 0%, #ffffff 100%); border: 2px solid #e8eef5; border-radius: 12px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04); flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 250px;">
                        <input type="text" id="messageSearchInput" data-i18n-placeholder="messages.searchPlaceholder" placeholder="üîç Buscar en mensajes..." oninput="debouncedSearchMessages()" style="width: 100%; padding: 12px 15px; border: 2px solid #e8eef5; border-radius: 8px; background: #ffffff; color: #1a2332; font-size: 0.95em; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);">
                    </div>
                    <button id="pendingMessagesBtn" class="btn-primary" onclick="showPendingMessages()" style="flex: 1; min-width: 150px; padding: 15px 25px; font-size: 1.05em; font-weight: 600; border-radius: 8px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden;">
                        <span style="position: relative; z-index: 1;" data-i18n="messages.pending">Mensajes Pendientes</span>
                    </button>
                    <button id="repliedMessagesBtn" class="btn-secondary" onclick="showRepliedMessages()" style="flex: 1; min-width: 150px; padding: 15px 25px; font-size: 1.05em; font-weight: 600; border-radius: 8px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden;">
                        <span style="position: relative; z-index: 1;" data-i18n="messages.replied">Mensajes Respondidos</span>
                    </button>
                </div>

                <div id="teacherMessagesContainer" class="messages-container" style="margin-top: 20px;">
                    <!-- Los mensajes se cargar√°n aqu√≠ -->
                </div>
            </div>
        </main>
    </div>

    <!-- Teacher Students View -->
    <div id="teacherStudentsView" class="dashboard-container hidden">
        <header class="dashboard-header">
            <h1 onclick="showLandingView()" class="logo-clickable">Munay</h1>
            <div class="user-info" style="display: flex; align-items: center; gap: 12px;">
                <span id="teacherName"></span>
                <button class="btn-secondary" onclick="logout()" id="logoutButton">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <nav class="teacher-nav">
            <button class="nav-btn" onclick="showTeacherView()">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" onclick="showTeacherMessagesView()">
                <span class="nav-icon">üí¨</span>
                <span>Mensajes An√≥nimos</span>
            </button>
            <button class="nav-btn" onclick="showTeacherRiskAlertsView()" style="position: relative;" id="riskAlertsNavBtn">
                <span class="nav-icon">‚ö†Ô∏è</span>
                <span>Alertas de Riesgo</span>
                <span id="riskAlertsBadge" style="display: none; position: absolute; top: 8px; right: 8px; width: 8px; height: 8px; background: #dc3545; border-radius: 50%;"></span>
            </button>
            <button class="nav-btn active" onclick="showTeacherStudentsView()">
                <span class="nav-icon">üë•</span>
                <span>Lista de Estudiantes</span>
            </button>
            <button class="nav-btn" onclick="showTeacherNotificationsView()" style="position: relative;">
                <span class="nav-icon">üîî</span>
                <span>Notificaciones</span>
                <span class="notification-badge-nav" id="notificationBadge" style="display: none;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherClassCodesView()">
                <span class="nav-icon">üîë</span>
                <span>Mis C√≥digos de Clase</span>
            </button>
            <button class="nav-btn" onclick="showTeacherGrowthSpacesView()">
                <span class="nav-icon">üå±</span>
                <span>Espacios de Crecimiento</span>
            </button>
        </nav>

        <main class="dashboard-main">
            <div class="welcome-section">
                <h2 data-i18n="students.title">Gesti√≥n de Estudiantes</h2>
                <p data-i18n="students.subtitle">Revisa el estado de bienestar de cada estudiante y accede a informaci√≥n detallada.</p>
            </div>

            <div class="content-section">
                <div class="section-title" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                    <h3 style="margin: 0;" data-i18n="students.list">Lista de Estudiantes</h3>
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                        <input type="text" id="studentSearchInput" data-i18n-placeholder="students.searchPlaceholder" placeholder="üîç Buscar por nombre..." oninput="debouncedSearchStudents()" style="padding: 10px 15px; border: 2px solid #e8eef5; border-radius: 8px; background: #ffffff; color: #1a2332; font-size: 0.95em; min-width: 250px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04); transition: all 0.3s ease;">
                        <label for="classCodeFilter" style="font-weight: 600; color: #1a2332; white-space: nowrap;" data-i18n="students.filterByClass">Filtrar por clase:</label>
                        <select id="classCodeFilter" onchange="debouncedFilterStudentsByClass()" style="padding: 10px 15px; border: 2px solid #e8eef5; border-radius: 8px; background: linear-gradient(135deg, #ffffff 0%, #f8f9fc 100%); color: #1a2332; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s ease; min-width: 220px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);">
                            <option value="" data-i18n="filters.allClasses">Todas las clases</option>
                        </select>
                    </div>
                </div>

                <div class="students-table-container">
                    <table class="students-table">
                        <thead>
                            <tr>
                                <th data-i18n="students.tableName">Nombre</th>
                                <th data-i18n="students.tableEmail">Email</th>
                                <th data-i18n="students.tableWellbeingScore">Score de Bienestar</th>
                                <th data-i18n="students.tableStatus">Estado</th>
                                <th data-i18n="students.tableLastSurvey">√öltima Encuesta</th>
                                <th data-i18n="students.tableActions">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                            <!-- Las filas se cargar√°n din√°micamente -->
                        </tbody>
                    </table>
                </div>

                <div id="noStudentsMessage" class="no-data-message" style="display: none;">
                    <p data-i18n="students.noStudentsMessage">No hay estudiantes registrados a√∫n. Comparte tu c√≥digo de clase para que se registren.</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Teacher Class Codes View -->
    <div id="teacherClassCodesView" class="dashboard-container hidden">
        <header class="dashboard-header">
            <h1 onclick="showLandingView()" class="logo-clickable">Munay</h1>
            <div class="user-info" style="display: flex; align-items: center; gap: 12px;">
                <span id="teacherName"></span>
                <button class="btn-secondary" onclick="logout()" id="logoutButton">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <nav class="teacher-nav">
            <button class="nav-btn" onclick="showTeacherView()">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" onclick="showTeacherMessagesView()">
                <span class="nav-icon">üí¨</span>
                <span>Mensajes An√≥nimos</span>
            </button>
            <button class="nav-btn" onclick="showTeacherRiskAlertsView()" style="position: relative;" id="riskAlertsNavBtn">
                <span class="nav-icon">‚ö†Ô∏è</span>
                <span>Alertas de Riesgo</span>
                <span id="riskAlertsBadge" style="display: none; position: absolute; top: 8px; right: 8px; width: 8px; height: 8px; background: #dc3545; border-radius: 50%;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherStudentsView()">
                <span class="nav-icon">üë•</span>
                <span>Lista de Estudiantes</span>
            </button>
            <button class="nav-btn" onclick="showTeacherNotificationsView()" style="position: relative;">
                <span class="nav-icon">üîî</span>
                <span>Notificaciones</span>
                <span class="notification-badge-nav" id="notificationBadge" style="display: none;"></span>
            </button>
            <button class="nav-btn active" onclick="showTeacherClassCodesView()">
                <span class="nav-icon">üîë</span>
                <span>Mis C√≥digos de Clase</span>
            </button>
            <button class="nav-btn" onclick="showTeacherGrowthSpacesView()">
                <span class="nav-icon">üå±</span>
                <span>Espacios de Crecimiento</span>
            </button>
        </nav>

        <main class="dashboard-main">
            <div class="welcome-section">
                <h2 data-i18n="classCodes.title">Gesti√≥n de C√≥digos de Clase</h2>
                <p data-i18n="classCodes.subtitle">Crea y administra los c√≥digos de clase para que tus estudiantes se registren en la plataforma.</p>
            </div>

            <div class="teacher-controls">
                <div class="control-group" style="width: 100%; flex-direction: column; align-items: flex-start; gap: 20px;">
                    <div style="width: 100%; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                        <label style="margin: 0;" data-i18n="classCodes.myCodes">Mis C√≥digos de Clase:</label>
                        <button class="btn-primary" onclick="openCreateClassCodeModal()" style="padding: 10px 20px; font-size: 0.95em;">
                            <span data-i18n="classCodes.createNew">+ Crear Nuevo C√≥digo</span>
                        </button>
                    </div>
                    <div id="classCodesList" class="class-codes-list">
                        <!-- Los c√≥digos de clase se cargar√°n din√°micamente -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Teacher Notifications View -->
    <div id="teacherNotificationsView" class="dashboard-container hidden">
        <header class="dashboard-header">
            <h1 onclick="showLandingView()" class="logo-clickable">Munay</h1>
            <div class="user-info" style="display: flex; align-items: center; gap: 12px;">
                <span id="teacherName"></span>
                <button class="btn-secondary" onclick="logout()" id="logoutButton">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <nav class="teacher-nav">
            <button class="nav-btn" onclick="showTeacherView()">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" onclick="showTeacherMessagesView()">
                <span class="nav-icon">üí¨</span>
                <span>Mensajes An√≥nimos</span>
            </button>
            <button class="nav-btn" onclick="showTeacherRiskAlertsView()" style="position: relative;" id="riskAlertsNavBtn">
                <span class="nav-icon">‚ö†Ô∏è</span>
                <span>Alertas de Riesgo</span>
                <span id="riskAlertsBadge" style="display: none; position: absolute; top: 8px; right: 8px; width: 8px; height: 8px; background: #dc3545; border-radius: 50%;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherStudentsView()">
                <span class="nav-icon">üë•</span>
                <span>Lista de Estudiantes</span>
            </button>
            <button class="nav-btn active" onclick="showTeacherNotificationsView()" style="position: relative;">
                <span class="nav-icon">üîî</span>
                <span>Notificaciones</span>
                <span class="notification-badge-nav" id="notificationBadge" style="display: none;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherClassCodesView()">
                <span class="nav-icon">üîë</span>
                <span>Mis C√≥digos de Clase</span>
            </button>
            <button class="nav-btn" onclick="showTeacherGrowthSpacesView()">
                <span class="nav-icon">üå±</span>
                <span>Espacios de Crecimiento</span>
            </button>
        </nav>

        <main class="dashboard-main">
            <div class="welcome-section">
                <h2 data-i18n="notifications.title">Notificaciones de Actividades</h2>
                <p data-i18n="notifications.subtitle">Mantente al d√≠a con las actividades que completan tus estudiantes.</p>
            </div>

            <div class="content-section">
                <div class="dashboard-card">
                    <div class="dashboard-card-title" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span>üîî</span>
                            <span data-i18n="nav.notifications">Notificaciones</span>
                        </div>
                        <button class="btn-secondary" onclick="markAllNotificationsAsRead()" style="padding: 8px 16px; font-size: 0.9em;" data-i18n="notifications.markAllAsRead">Marcar todas como le√≠das</button>
                    </div>
                    <div id="notificationsList" style="max-height: 600px; overflow-y: auto;">
                        <!-- Las notificaciones se cargar√°n aqu√≠ -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Teacher Growth Spaces View -->
    <div id="teacherGrowthSpacesView" class="dashboard-container hidden">
        <header class="dashboard-header">
            <h1 onclick="showLandingView()" class="logo-clickable">Munay</h1>
            <div class="user-info" style="display: flex; align-items: center; gap: 12px;">
                <span id="teacherName"></span>
                <button class="btn-secondary" onclick="logout()" id="logoutButton">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <nav class="teacher-nav">
            <button class="nav-btn" onclick="showTeacherView()">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" onclick="showTeacherMessagesView()">
                <span class="nav-icon">üí¨</span>
                <span>Mensajes An√≥nimos</span>
            </button>
            <button class="nav-btn" onclick="showTeacherRiskAlertsView()" style="position: relative;" id="riskAlertsNavBtn">
                <span class="nav-icon">‚ö†Ô∏è</span>
                <span>Alertas de Riesgo</span>
                <span id="riskAlertsBadge" style="display: none; position: absolute; top: 8px; right: 8px; width: 8px; height: 8px; background: #dc3545; border-radius: 50%;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherStudentsView()">
                <span class="nav-icon">üë•</span>
                <span>Lista de Estudiantes</span>
            </button>
            <button class="nav-btn" onclick="showTeacherNotificationsView()" style="position: relative;">
                <span class="nav-icon">üîî</span>
                <span>Notificaciones</span>
                <span class="notification-badge-nav" id="notificationBadge" style="display: none;"></span>
            </button>
            <button class="nav-btn" onclick="showTeacherClassCodesView()">
                <span class="nav-icon">üîë</span>
                <span>Mis C√≥digos de Clase</span>
            </button>
            <button class="nav-btn active" onclick="showTeacherGrowthSpacesView()">
                <span class="nav-icon">üå±</span>
                <span>Espacios de Crecimiento</span>
            </button>
        </nav>

        <main class="dashboard-main">
            <div class="welcome-section">
                <h2>üå± <span data-i18n="growthSpaces.title">Espacios de Crecimiento</span></h2>
                <p data-i18n="growthSpaces.subtitle">Crea grupos personalizados para acompa√±ar de cerca el desarrollo de tus estudiantes y realizar trabajos espec√≠ficos de apoyo.</p>
            </div>

            <div class="content-section">
                <div class="section-title" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; margin-bottom: 25px;">
                    <h3 style="margin: 0;" data-i18n="growthSpaces.mySpaces">Mis Espacios de Crecimiento</h3>
                    <button class="btn-primary" onclick="openCreateGrowthSpaceModal()" style="padding: 12px 24px; font-size: 1em;">
                        <span data-i18n="growthSpaces.createNew">+ Crear Nuevo Espacio</span>
                    </button>
                </div>

                <div id="growthSpacesContainer" class="growth-spaces-container">
                    <!-- Los espacios de crecimiento se cargar√°n din√°micamente -->
                </div>

                <div id="noGrowthSpacesMessage" class="no-data-message" style="display: none; text-align: center; padding: 60px 20px;">
                    <div style="font-size: 4em; margin-bottom: 20px;">üå±</div>
                    <h3 style="color: #1a2332; margin-bottom: 10px;" data-i18n="growthSpaces.noSpaces">A√∫n no has creado espacios de crecimiento</h3>
                    <p style="color: #5a6c7d; margin-bottom: 30px; max-width: 500px; margin-left: auto; margin-right: auto;" data-i18n="growthSpaces.noSpacesDesc">
                        Los espacios de crecimiento te permiten organizar a tus estudiantes en grupos para realizar trabajos espec√≠ficos de acompa√±amiento y seguimiento personalizado.
                    </p>
                    <button class="btn-primary" onclick="openCreateGrowthSpaceModal()" style="padding: 15px 30px; font-size: 1.1em;">
                        <span data-i18n="growthSpaces.createFirst">Crear mi Primer Espacio</span>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Survey Modal -->
    <div id="surveyModal" class="modal">
        <div class="modal-content" style="max-width: 900px; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden;">
            <div style="flex-shrink: 0; padding-bottom: 15px; border-bottom: 1px solid #e8eef5;">
                <span class="close" onclick="closeSurveyModal()" style="position: absolute; top: 15px; right: 20px;">&times;</span>
                <h2 id="modalSurveyTitle" style="margin: 0; padding-right: 40px; font-size: 1.4em; color: #1a2332;"></h2>
            </div>
            <div id="surveyQuestions" style="flex: 1; overflow-y: auto; overflow-x: hidden; padding: 20px 0; min-height: 0;"></div>
        </div>
    </div>

    <!-- Activity Modal -->
    <div id="activityModal" class="modal">
        <div class="modal-content" style="max-width: 900px; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden;">
            <div style="flex-shrink: 0; padding-bottom: 15px; border-bottom: 1px solid #e8eef5;">
                <span class="close" onclick="closeActivityModal()" style="position: absolute; top: 15px; right: 20px;">&times;</span>
                <h2 id="modalActivityTitle" style="margin: 0; padding-right: 40px; font-size: 1.4em; color: #1a2332;"></h2>
            </div>
            <div id="activityContent" style="flex: 1; overflow-y: auto; overflow-x: hidden; padding: 20px 0; min-height: 0;"></div>
        </div>
    </div>

    <!-- Rewards Modal -->
    <div id="rewardsModal" class="modal">
        <div class="modal-content rewards-modal-content">
            <span class="close" onclick="closeRewardsModal()">&times;</span>
            <div class="rewards-modal-header">
                <h2 style="margin: 0 0 8px 0; color: #333;">üèÜ Mis Recompensas Emocionales</h2>
                <p style="color: #666; margin: 0; font-size: 0.95em;">Gana sellos e insignias demostrando empat√≠a, autorregulaci√≥n y resiliencia</p>
            </div>
            <div id="rewardsContainer" class="rewards-container">
                <!-- Las recompensas se cargar√°n din√°micamente -->
            </div>
        </div>
    </div>

    <!-- Badge Detail Modal -->
    <div id="badgeDetailModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close" onclick="closeBadgeDetailModal()">&times;</span>
            <div id="badgeDetailContent">
                <!-- El contenido se cargar√° din√°micamente -->
            </div>
        </div>
    </div>


    <!-- Student Detail Modal -->
    <div id="studentDetailModal" class="modal student-detail-modal">
        <div class="modal-backdrop" onclick="closeStudentDetailModal()"></div>
        <div class="student-detail-dashboard">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <div class="student-avatar">
                        <span id="detailStudentInitial"></span>
                    </div>
                    <div class="dashboard-title-section">
                        <h2 id="detailStudentName" class="dashboard-title"></h2>
                        <p id="detailStudentEmail" class="dashboard-subtitle"></p>
                    </div>
                </div>
                <button class="dashboard-close-btn" onclick="closeStudentDetailModal()" title="Cerrar">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="dashboard-body" id="studentDetailContent">
                <!-- Contenido se carga din√°micamente -->
            </div>
        </div>
    </div>

    <!-- Send Message Modal -->
    <div id="sendMessageModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSendMessageModal()">&times;</span>
            <h2>Enviar Mensaje An√≥nimo</h2>
            <p style="color: #666; margin-bottom: 20px;">Tu mensaje ser√° completamente an√≥nimo. El docente no podr√° ver tu identidad.</p>
            <form id="sendMessageForm">
                <div class="form-group">
                    <label for="messageContent">Mensaje:</label>
                    <textarea id="messageContent" rows="8" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px;" placeholder="Escribe tu mensaje aqu√≠..." required></textarea>
                </div>
                <button type="submit" class="btn-primary">Enviar Mensaje</button>
            </form>
        </div>
    </div>

    <!-- Reply Message Modal -->
    <div id="replyMessageModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeReplyMessageModal()">&times;</span>
            <h2>Responder Mensaje</h2>
            <div id="originalMessageContent" style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <!-- El mensaje original se mostrar√° aqu√≠ -->
            </div>
            <form id="replyMessageForm">
                <div class="form-group">
                    <label for="replyContent">Tu respuesta:</label>
                    <textarea id="replyContent" rows="6" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px;" placeholder="Escribe tu respuesta..." required></textarea>
                </div>
                <button type="submit" class="btn-primary" data-i18n="messages.sendReply">Enviar Respuesta</button>
            </form>
        </div>
    </div>

    <!-- Success Message Modal -->
    <div id="successMessageModal" class="modal">
        <div class="modal-content" style="max-width: 500px; text-align: center;">
            <div id="successMessageContent" style="padding: 20px;">
                <!-- El contenido del mensaje se cargar√° din√°micamente -->
            </div>
            <button class="btn-primary" onclick="closeSuccessMessageModal()" style="margin-top: 20px; width: 100%;">Entendido</button>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="modal">
        <div class="modal-content" style="max-width: 500px; text-align: center;">
            <div id="confirmationMessage" style="padding: 20px; font-size: 1.1em; color: #333;">
                <!-- El mensaje de confirmaci√≥n se cargar√° din√°micamente -->
            </div>
            <div style="display: flex; gap: 10px; margin-top: 20px; justify-content: center;">
                <button class="btn-secondary" id="confirmationCancelBtn" onclick="closeConfirmationModal(false)" style="flex: 1;">Cancelar</button>
                <button class="btn-primary" id="confirmationConfirmBtn" onclick="closeConfirmationModal(true)" style="flex: 1;">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p style="margin-top: 20px; color: #666;">Cargando...</p>
        </div>
    </div>

    <!-- Create Class Code Modal -->
    <div id="createClassCodeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCreateClassCodeModal()">&times;</span>
            <h2>Crear Nuevo C√≥digo de Clase</h2>
            <p style="color: #666; margin-bottom: 20px;">Genera un nuevo c√≥digo para que tus estudiantes se registren en una nueva clase.</p>
            <form id="createClassCodeForm">
                <div class="form-group">
                    <label for="className">Nombre de la clase (opcional):</label>
                    <input type="text" id="className" placeholder="Ej: 5to A, Matem√°ticas, etc." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px;">
                    <small style="color: #666; font-size: 0.9em;">Este nombre es solo para tu referencia interna.</small>
                </div>
                <button type="submit" class="btn-primary">Generar C√≥digo</button>
            </form>
        </div>
    </div>

    <!-- Create Growth Space Modal -->
    <div id="createGrowthSpaceModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close" onclick="closeCreateGrowthSpaceModal()">&times;</span>
            <h2>üå± <span data-i18n="growthSpaces.createModalTitle">Crear Nuevo Espacio de Crecimiento</span></h2>
            <p style="color: #666; margin-bottom: 20px;" data-i18n="growthSpaces.createModalSubtitle">Crea un espacio personalizado para acompa√±ar de cerca a un grupo de estudiantes.</p>
            <form id="createGrowthSpaceForm">
                <div class="form-group">
                    <label for="growthSpaceName"><span data-i18n="growthSpaces.spaceName">Nombre del Espacio</span> <span style="color: #e74c3c;" data-i18n="growthSpaces.spaceNameRequired">*</span></label>
                    <input type="text" id="growthSpaceName" required data-i18n-placeholder="growthSpaces.spaceNamePlaceholder" placeholder="Ej: Grupo de Apoyo Emocional, Taller de Resiliencia..." style="width: 100%; padding: 12px; border: 2px solid #e8eef5; border-radius: 8px; font-size: 1em;">
                    <small style="color: #666; font-size: 0.9em;" data-i18n="growthSpaces.spaceNameHint">Elige un nombre que refleje el prop√≥sito de este espacio.</small>
                </div>
                <div class="form-group">
                    <label for="growthSpaceDescription" data-i18n="growthSpaces.spaceDescription">Descripci√≥n (opcional)</label>
                    <textarea id="growthSpaceDescription" rows="3" data-i18n-placeholder="growthSpaces.spaceDescriptionPlaceholder" placeholder="Describe el objetivo o prop√≥sito de este espacio..." style="width: 100%; padding: 12px; border: 2px solid #e8eef5; border-radius: 8px; font-size: 1em; resize: vertical;"></textarea>
                </div>
                <div style="display: flex; gap: 15px; margin-top: 25px;">
                    <button type="submit" class="btn-primary" style="flex: 1;" data-i18n="growthSpaces.createSpace">Crear Espacio</button>
                    <button type="button" class="btn-secondary" onclick="closeCreateGrowthSpaceModal()" style="flex: 1;" data-i18n="buttons.cancel">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Students to Growth Space Modal -->
    <div id="addStudentsToSpaceModal" class="modal">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden;">
            <div style="flex-shrink: 0; padding-bottom: 15px; border-bottom: 1px solid #e8eef5;">
                <span class="close" onclick="closeAddStudentsToSpaceModal()" style="position: absolute; top: 15px; right: 20px;">&times;</span>
                <h2 id="addStudentsModalTitle" style="margin: 0; padding-right: 40px; font-size: 1.4em; color: #1a2332;">A√±adir Estudiantes</h2>
            </div>
            <div style="flex: 1; overflow-y: auto; padding: 20px 0; min-height: 0;">
                <div style="margin-bottom: 20px;">
                    <input type="text" id="searchStudentsForSpace" placeholder="üîç Buscar estudiantes..." oninput="filterStudentsForSpace()" style="width: 100%; padding: 12px 15px; border: 2px solid #e8eef5; border-radius: 8px; font-size: 1em;">
                </div>
                <div id="studentsForSpaceList" style="display: flex; flex-direction: column; gap: 12px;">
                    <!-- Los estudiantes se cargar√°n din√°micamente -->
                </div>
                <div id="noStudentsForSpaceMessage" style="display: none; text-align: center; padding: 40px; color: #999;">
                    <p>No hay estudiantes disponibles para a√±adir.</p>
                </div>
            </div>
            <div style="flex-shrink: 0; padding-top: 15px; border-top: 1px solid #e8eef5; display: flex; gap: 15px;">
                <button class="btn-primary" onclick="confirmAddStudentsToSpace()" style="flex: 1;">A√±adir Seleccionados</button>
                <button class="btn-secondary" onclick="closeAddStudentsToSpaceModal()" style="flex: 1;">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Owner/Admin Dashboard View -->
    <div id="ownerView" class="dashboard-container hidden">
        <header class="dashboard-header">
            <h1 onclick="showLandingView()" class="logo-clickable">Munay</h1>
            <div class="user-info" style="display: flex; align-items: center; gap: 12px;">
                <span id="ownerName">Administrador</span>
                <button class="btn-secondary" onclick="logout()">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <main class="dashboard-main">
            <div class="dashboard-section">
                <h2 style="margin-bottom: 30px; color: #1a2332;">Panel de Administraci√≥n</h2>
                <p style="color: #666; margin-bottom: 30px;">Vista agregada de todos tus clientes - Respetando la privacidad de los datos</p>

                <!-- Estad√≠sticas Generales -->
                <div class="stats-grid" id="ownerStatsGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px;">
                    <!-- Se llenar√° din√°micamente -->
                </div>

                <!-- Gesti√≥n de Clientes -->
                <div class="clients-section" style="margin-top: 40px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="margin: 0; color: #1a2332;">Gesti√≥n de Clientes</h3>
                        <button class="btn-primary" onclick="openCreateClientModal()" style="display: flex; align-items: center; gap: 8px;">
                            <span>+</span> Nuevo Cliente
                        </button>
                    </div>
                    <div id="clientsList" style="display: grid; gap: 20px;">
                        <!-- Se llenar√° din√°micamente -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal para Crear/Editar Cliente -->
    <div id="clientModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 id="clientModalTitle">Nuevo Cliente</h2>
                <button class="modal-close" onclick="closeClientModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="clientForm" onsubmit="handleClientSubmit(event)">
                    <div class="form-group">
                        <label for="clientName">Nombre del Cliente *</label>
                        <input type="text" id="clientName" name="name" required placeholder="Ej: Colegio de Teis">
                    </div>
                    <div class="form-group">
                        <label for="clientContactEmail">Email de Contacto *</label>
                        <input type="email" id="clientContactEmail" name="contactEmail" required placeholder="contacto@colegio.com">
                    </div>
                    <div class="form-group">
                        <label for="clientContactPhone">Tel√©fono de Contacto</label>
                        <input type="tel" id="clientContactPhone" name="contactPhone" placeholder="+34 123 456 789">
                    </div>
                    <div class="form-group">
                        <label for="clientContactName">Nombre del Contacto</label>
                        <input type="text" id="clientContactName" name="contactName" placeholder="Nombre de la persona de contacto">
                    </div>
                    <div class="form-group">
                        <label for="clientNotes">Notas</label>
                        <textarea id="clientNotes" name="notes" rows="3" placeholder="Informaci√≥n adicional sobre el cliente"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-secondary" onclick="closeClientModal()">Cancelar</button>
                        <button type="submit" class="btn-primary">Guardar Cliente</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para Importar CSV -->
    <div id="importCSVModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2>Importar Usuarios desde CSV</h2>
                <button class="modal-close" onclick="closeImportCSVModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="importCSVClientInfo" style="margin-bottom: 20px; padding: 15px; background: #f5f7fa; border-radius: 8px;">
                    <strong id="importCSVClientName"></strong>
                </div>
                <div class="form-group">
                    <label for="csvFileInput">Seleccionar archivo CSV *</label>
                    <input type="file" id="csvFileInput" accept=".csv" onchange="handleCSVFileSelect(event)">
                    <small style="display: block; margin-top: 8px; color: #666;">
                        Formato: name,email,password,role,classCode,age,gender
                    </small>
                </div>
                <div id="csvPreview" style="margin-top: 20px; display: none;">
                    <h4 style="margin-bottom: 10px;">Vista Previa:</h4>
                    <div id="csvPreviewContent" style="max-height: 200px; overflow-y: auto; background: #f5f7fa; padding: 15px; border-radius: 8px; font-size: 12px;"></div>
                </div>
                <div id="csvImportStatus" style="margin-top: 20px; display: none;"></div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeImportCSVModal()">Cancelar</button>
                    <button type="button" class="btn-primary" id="importCSVBtn" onclick="importCSVToClient()" disabled>Importar Usuarios</button>
                </div>
            </div>
        </div>
    </div>

    <!-- i18n.js movido a fase-traduccion-i18n/ para desarrollo futuro -->
    <!-- <script src="i18n.js"></script> -->
    <script src="localStorage.js"></script>
    <script src="keywordAnalysis.js"></script>
    <!-- Configuraci√≥n de API (debe cargarse antes de api-integration.js) -->
    <script src="config-api.js"></script>
    <!-- Sistema de integraci√≥n Backend-Frontend -->
    <script src="api-integration.js"></script>
    <script src="script.js"></script>
</body>
</html>
